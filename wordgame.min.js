function wordGame(){}
(function(){function E(){c.attr("disabled","disabled");var a=p.height(),b=p.width()/2-f.width()/2,a=a/2-f.height()/2,d=(new Date).getTime()/1E3-k;F();m.addClass("finish");$("#f-score").html("Score: "+h);$("#f-time").html(d.toFixed()+" sec");$("#f-wpm").html(r.html());$("#f-errors").html(s+" error"+(1<s?"s":""));f.css({top:a,left:b}).show()}function N(){t=$("#options-wrapper input:checked").data("type");"timed"==t&&(u=setTimeout(function(){G()},1E4));$("#options-wrapper input").attr("disabled","disabled")}
function G(){clearTimeout(u);var a=5E3,b=(new Date).getTime()/1E3-k;b>=H?E():(b>=H-1E4&&(a=500),u=setTimeout(function(){G()},a))}function O(){c.keyup(function(a){if(27==a.keyCode||13==a.keyCode)c.val("");else if(32==a.keyCode)c.val(this.value.substring(0,this.value.length-1));else if(0==this.value.length)n("#333","#000");else{var a=this.value,b=(new Date).getTime()/1E3,q,v=!1,g,e=!1,f=!1;null===k&&(k=b,f=!0,N());I++;for(x in d)(f&&(d[x].ts=b),q=d[x].word.substring(0,a.length)==a,lengthMatches=d[x].word.length==
a.length,g=!e&&!q&&b-d[x].ts>o[i].timeout,q&&lengthMatches||g)?(v=!0,J($("#w"+d[x].id),x),g?e=!0:(n("#333","#000"),c.val(""),h++,A.html(h).animate({color:"#fff047"},300).delay(100).animate({color:"#f1f1f1"},300),1==h&&c.removeAttr("placeholder"),null!=o[i].score&&h>=o[i].score&&(i++,B.html("Lvl "+(i+1))),F(),h>=P&&"words"==t&&E())):!1===v&&q&&(n("#2d2b4e","#190eb5"),v=!0,d[x].ts=b,$("#w"+d[x].id).css({zIndex:2}));!1===v?C||(s++,C=!0,n("#58282e","#E0001E")):C=!1;5>j&&l()}});m.on("click","li",function(){var a=
$(this);J(a,a.data("id"));c.focus();5>j&&l()});$("#reset, #finish-button").click(function(){clearTimeout(u);n("#333","#000");s=I=h=i=0;t=k=null;c.val("").removeAttr("disabled").focus();$("#options-wrapper input").removeAttr("disabled","disabled");A.html("0");B.html("Lvl 1");r.html("");f.hide();m.removeClass("finish");c.attr("placeholder","Start typing!");l()});$("#wordnik a").click(function(){window.open(this.href);return!1});$("#loadit").click(function(){l()})}function J(a,b){a.fadeOut(300).queue(function(){$(this).remove()});
j--;delete d[b]}function n(a,b){Q.css({backgroundColor:a});c.css({color:b})}function F(){var a=((new Date).getTime()/1E3-k)/60;r.html(Math.round(h/a)+" WPM")}function D(){K=setTimeout(function(){l()},R)}function l(){!0===w?D():(clearTimeout(K),w=!0,j==L?(w=!1,D()):(y.limit=L-j+5,y.minLength=o[i].minLength,y.maxLength=o[i].maxLength,$.ajax("http://api.wordnik.com/v4/words.json/randomWords",{data:y,dataType:"jsonp"}).done(function(a){for(var b=p.height(),c=p.width(),f=(new Date).getTime()/1E3,g,e=0;e<
a.length&&!(10<=j);e++)j++,d[a[e].id]={id:a[e].id,word:a[e].word.toLowerCase(),ts:f},g=$('<li id="w'+a[e].id+'" data-id="'+a[e].id+'" style="display:none;">'+d[a[e].id].word+"</li>"),g.appendTo(m),g.css({backgroundColor:S[z],left:Math.floor(Math.random()*(c-M-g.width()))+1,top:Math.floor(Math.random()*(b-M-120-g.height()))+100}).fadeIn(300).delay(300),z++,10==z&&(z=0)}).always(function(){D();w=!1})))}$(window);var p=$(document),Q=$("body"),M=20,R=5E3,H=60,P=100,S="#ECD078,#D95B43,#C02942,#542437,#53777A,#003366,#FFCC00,#53004B,#77BED2,#F2583E".split(","),
z=0,c,m,A,B,r,f,K=null,u=null,L=10,j=0,w=!1,d={},y={api_key:"b9342023bee8ce1e6060402034d0b36c7ab0ec75ceb051e4a",hasDictionaryDef:!0,minLength:3,maxLength:7,minCorpusCount:100,minDictionaryCount:2},i=0,o=[{score:10,minLength:3,maxLength:4,timeout:30},{score:25,minLength:4,maxLength:5,timeout:30},{score:50,minLength:4,maxLength:6,timeout:40},{score:80,minLength:5,maxLength:7,timeout:40},{score:120,minLength:5,maxLength:9,timeout:60},{score:150,minLength:5,maxLength:10,timeout:60},{score:200,minLength:5,
maxLength:12,timeout:80},{score:300,minLength:5,maxLength:14,timeout:80},{score:null,minLength:10,maxLength:15,timeout:90}],h=0,I=0,s=0,C=!1,k=null,t=null;this.init=function(){m=$("#worddisplay");c=$("#typebox").focus();A=$("#score");B=$("#level");r=$("#wpm");f=$("#finish-dialog");O();l()}}).apply(wordGame);$(document).ready(function(){wordGame.init()});