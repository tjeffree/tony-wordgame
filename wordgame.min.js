function wordGame(){}
(function(){function z(){c.attr("disabled","disabled");var a=k.height(),b=k.width()/2-f.width()/2,a=a/2-f.height()/2,d=(new Date).getTime()/1E3-startTime;A();g.addClass("finish");$("#f-score").html("Score: "+score);$("#f-time").html(d.toFixed()+" sec");$("#f-wpm").html(q.html());$("#f-errors").html(errors+" error"+(1<errors?"s":""));f.css({top:a,left:b}).show()}function B(){clearTimeout(r);var a=5E3,b=Date.now()/1E3-startTime;b>=C?z():(b>=C-1E4&&(a=500),r=setTimeout(function(){B()},a))}function D(a,
b){a.fadeOut(300).queue(function(){$(this).remove()});m--;delete d[b]}function n(a,b){H.css({backgroundColor:a});c.css({color:b})}function A(){var a=(Date.now()/1E3-startTime)/60;q.html(Math.round(score/a)+" WPM")}function v(){E=setTimeout(function(){j()},I)}function j(){!0===s?v():(clearTimeout(E),s=!0,m===F?(s=!1,v()):(t.limit=F-m+5,t.minLength=p[h].minLength,t.maxLength=p[h].maxLength,$.ajax("http://api.wordnik.com/v4/words.json/randomWords",{data:t,dataType:"jsonp"}).done(function(a){for(var b=
k.height(),c=k.width(),h=Date.now()/1E3,j=[],l,e=0;e<a.length&&!(10<=m);e++)m++,d[a[e].id]={id:a[e].id,word:a[e].word.toLowerCase(),ts:h},l=$('<li id="w'+a[e].id+'" data-id="'+a[e].id+'" style="display:none;">'+d[a[e].id].word+"</li>"),l.css({backgroundColor:J[u],left:Math.floor(Math.random()*(c-G-l.width()))+1,top:Math.floor(Math.random()*(b-G-220-l.height()))+100}).fadeIn(300).delay(300),j.push(l),u++,10==u&&(u=0);g.append(j)}).always(function(){v();s=!1})))}$(window);var k=$(document),H=$("body"),
G=20,I=5E3,C=60,J="#ECD078 #D95B43 #C02942 #542437 #53777A #003366 #FFCC00 #53004B #77BED2 #F2583E".split(" "),u=0,c,g,w,y,q,f,E=null,r=null,F=10,m=0,s=!1,d={},t={api_key:"b9342023bee8ce1e6060402034d0b36c7ab0ec75ceb051e4a",hasDictionaryDef:!0,minLength:3,maxLength:7,minCorpusCount:100,minDictionaryCount:2},h=0,p=[{score:10,minLength:3,maxLength:4,timeout:30},{score:25,minLength:4,maxLength:5,timeout:30},{score:50,minLength:4,maxLength:6,timeout:40},{score:80,minLength:5,maxLength:7,timeout:40},{score:120,
minLength:5,maxLength:9,timeout:60},{score:150,minLength:5,maxLength:10,timeout:60},{score:200,minLength:5,maxLength:12,timeout:80},{score:300,minLength:5,maxLength:14,timeout:80},{score:null,minLength:10,maxLength:15,timeout:90}];errors=characters=score=0;inerror=!1;gametype=endTime=startTime=lastKey=null;this.init=function(){g=$("#worddisplay");c=$("#typebox").focus();w=$("#score");y=$("#level");q=$("#wpm");f=$("#finish-dialog");c.on("keydown",function(a){if(8===a.keyCode&&32===lastKey)return a.preventDefault(),
!1}).on("keyup",function(a){if(8===a.keyCode&&32===lastKey)lastKey=a.keyCode;else if(27===a.keyCode||13===a.keyCode)c.val("");else if(32===a.keyCode)c.val(this.value.substring(0,this.value.length-1)),lastKey=a.keyCode;else if(0==this.value.length)n("#333","#000");else{lastKey=a.keyCode;a=this.value;var b=Date.now()/1E3,f,g=!1,k,l=!1,e=!1;null===startTime&&(startTime=b,e=!0,gametype=$("#options-wrapper input:checked").data("type"),"timed"===gametype&&(r=setTimeout(function(){B()},1E4)),$("#options-wrapper input").attr("disabled",
"disabled"));characters++;for(x in d)e&&(d[x].ts=b),f=d[x].word.substring(0,a.length)===a,lengthMatches=d[x].word.length===a.length,k=!l&&!f&&b-d[x].ts>p[h].timeout,f&&lengthMatches||k?(g=!0,D($("#w"+d[x].id),x),k?l=!0:(n("#333","#000"),c.val(""),score++,w.html(score).animate({color:"#fff047"},300).delay(100).animate({color:"#f1f1f1"},300),1==score&&c.removeAttr("placeholder"),null!=p[h].score&&score>=p[h].score&&(h++,y.html("Lvl "+(h+1))),A(),100<=score&&"words"===gametype&&z())):!1===g&&f&&(n("#2d2b4e",
"#190eb5"),g=!0,d[x].ts=b,$("#w"+d[x].id).css({zIndex:2}));!1===g?inerror||(errors++,inerror=!0,n("#58282e","#E0001E")):inerror=!1;5>m&&j()}});g.on("click","li",function(){var a=$(this);D(a,a.data("id"));c.focus();5>m&&j()});$("#reset, #finish-button").click(function(){clearTimeout(r);n("#333","#000");errors=characters=score=h=0;lastKey=gametype=endTime=startTime=null;c.val("").removeAttr("disabled").focus();$("#options-wrapper input").removeAttr("disabled","disabled");w.html("0");y.html("Lvl 1");
q.html("");f.hide();g.removeClass("finish");c.attr("placeholder","Start typing!");j()});$("#wordnik a").click(function(){window.open(this.href);return!1});$("#loadit").click(function(){j()});j()}}).apply(wordGame);$(document).ready(function(){wordGame.init()});